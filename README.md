YjMonitor
===========
bç«™ ä¸Šèˆ¹é£æš´ç›‘æ§  
ä½œè€…è‡ªç”¨ï¼Œæ›´æ–°ä¸é¢‘ç¹ï¼ŒbugåŸºæœ¬æ²¡æœ‰ï¼Œä½†æ˜¯æ›´æ–°æ…¢ï¼Œè¡ç”Ÿè‡ªhttps://github.com/yjqiang/bilibili-live-tools  

monitoréƒ¨åˆ†
------------
1. ctrl.toml æœ€åé‚£é‡Œå®šä¹‰äº†å‘é€ç›®æ ‡æˆ¿é—´ï¼Œç»“æœéƒ½ä¼šå‘åˆ°æŒ‡å®šæˆ¿é—´é‡Œé¢ï¼›start endæ§åˆ¶ç›‘æ§èŒƒå›´ã€‚
1. ç”±äºpythonæ€§èƒ½é—®é¢˜ï¼Œæ¨èä¸€å°æœºå™¨ç›‘æ§ 4000 å·¦å³æˆ¿é—´ï¼Œéœ€è¦å‡ å°æœºå™¨ååŒä¸€èµ·ç›‘æ§ï¼Œä¹‹åè€ƒè™‘golangï¼ˆflag)ã€‚


ws_clientéƒ¨åˆ†
-------------
1. tcp_client.py æ˜¯ tcp æ¥æ”¶ç«¯ï¼Œè‡ªå®šä¹‰å¿ƒè·³ï¼ŒåŒæ—¶æŠŠåŸæ•°æ®å‰é¢åŠ ä¸€ä¸ª header ä½œä¸ºæ•°æ®å‘é€ï¼ˆå°±åƒ bilibili å¼¹å¹•é‚£æ ·ï¼‰ã€‚
1. req_check.py è´Ÿè´£ç›‘æ§ websocket æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™ã€‚ `observers_count` æ˜¯åœ¨çº¿æ€»è®¡ç”¨æˆ·æ•°é‡ï¼› `observers_count` åˆ†åˆ«ç»Ÿè®¡æ¯ä¸ª key çš„ç”¨æˆ·æ•°é‡ï¼ˆ key æ˜¯å–äº† md5 å¼€å¤´ 5 ä½ï¼Œ ä¸æ˜¯åŸ key ï¼‰ï¼› `posters_count` ç»Ÿè®¡æ‰€æœ‰æ¨é€è€…çš„çŠ¶æ€ï¼Œæ•°å­—æ˜¯è¯¥æ¨é€è€…æœ€åä¸€æ¬¡æ¨é€çš„ unix æ—¶é—´ï¼Œè‹¥ unix æ—¶é—´è·ç¦»å½“å‰æ—¶é—´è¿‡ä¹…ï¼Œé‚£ä¹ˆè¯´æ˜è¯¥æ¨é€è€…å¯èƒ½æ‰çº¿äº†ï¼› `curr_db` å±•ç¤ºäº†æ•°æ®åº“å†… key çš„å­˜å‚¨ï¼Œæ—¥æœŸä¸º`åˆ›å»º unix æ—¶é—´-åˆ°æœŸ unix æ—¶é—´`ï¼Œè¿™é‡Œçš„ key åŒæ ·æ˜¯ md5 ï¼Œå¦‚æœåˆ°æœŸæ—¥æœŸä¸º 0 ï¼Œé‚£ä¹ˆè¿™ä¸ª key æ˜¯æ°¸ä¹…æœ‰æ•ˆã€‚***æ¯è¿è¡Œä¸€æ¬¡è¯¥è„šæœ¬ï¼Œéƒ½ä¼šè‡ªåŠ¨æ¸…ç©ºè¿‡æœŸç”¨æˆ·ï¼Œä¹‹åæ‰è¿”å›æ•°æ®ã€‚***
1. req_create_key.py è´Ÿè´£è®© server æœåŠ¡å™¨äº§ç”Ÿæ–°çš„ key ï¼Œéœ€è¦è¶…ç®¡æƒé™ã€‚`max_users` è¡¨ç¤ºè¯¥ key çš„æœ€å¤§åŒæ—¶ä½¿ç”¨äººæ•°, `available_days` è¡¨ç¤ºæœ‰æ•ˆçš„å¤©æ•°ï¼Œå¦‚æœä¸º0ï¼Œé‚£ä¹ˆè¡¨ç¤ºæ°¸ä¹…æœ‰æ•ˆã€‚
1. req_post_raffle.py è´Ÿè´£å‘ server æœåŠ¡å™¨æ¨é€ raffle (ä»…ä½œä¸ºç¤ºä¾‹)ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™ã€‚
1. global_var.py é‡Œé¢çš„ `URL` æ˜¯ server æœåŠ¡å™¨çš„åœ°å€ä»¥åŠç«¯å£ï¼Œæ§åˆ¶ä»¥ä¸Šçš„è¯·æ±‚ç›®æ ‡ã€‚
1. key æ–‡ä»¶å¤¹é‡Œé¢çš„ create_key.py æ˜¯å•ç‹¬è¿è¡Œçš„äº§ç”Ÿå…¬é’¥ç§é’¥ï¼Œå¯†é’¥ç”¨äºéªŒè¯èº«ä»½ç­‰ã€‚å…¶ä¸­ super_admin_privkey.pem æ˜¯è¶…ç®¡ï¼Œ admin_admin_privkey.pem æ˜¯æ™®é€šç®¡ç†å‘˜ã€‚ä¸åŒ websocket æ§åˆ¶å†…å®¹æœ‰ä¸åŒçš„èº«ä»½æ§åˆ¶ï¼ŒçŠ¶æ€æ£€æŸ¥å’Œæ¨é€æŠ½å¥–éœ€è¦æ™®é€šç®¡ç†å‘˜ï¼Œè€Œäº§ç”Ÿ key éœ€è¦è¶…ç®¡èº«ä»½ã€‚

ws_serveréƒ¨åˆ†ï¼ˆå·²ç»åä¸ç¬¦å®ï¼Œç›®å‰åªæ”¯æŒ tcp äº†ï¼‰
-------------
1. run.py è´Ÿè´£è¿è¡Œã€‚
1. db è´Ÿè´£å­˜å‚¨ä¸éªŒè¯é“¾æ¥ key ã€‚key åœ¨æœåŠ¡å™¨ç«¯äº§ç”Ÿï¼Œä¿å­˜ç‰¹æ®Š hash ç”¨äºéªŒè¯å®¢æˆ·ç«¯çš„ tcp è¿æ¥è¯·æ±‚ï¼ŒåŒæ—¶çœŸæ­£çš„ key åŠ å¯†ä¹‹åè¿”å›åˆ°å‘å‡ºè¯¥è¯·æ±‚(req_post_raffle.py)çš„å®¢æˆ·ç«¯ã€‚
1. key æ–‡ä»¶å¤¹é‡Œé¢***åªå­˜è´®å…¬é’¥***ä»¥éªŒè¯èº«ä»½ç­‰ã€‚å…¶ä¸­ super_admin_pubkey.pem æ˜¯è¶…ç®¡ï¼Œ admin_pubkey.pem æ˜¯æ™®é€šç®¡ç†å‘˜ã€‚

key
-----------
1. clientã€serverã€monitoréƒ¨åˆ†(å°±æ˜¯ğŸ‘†é‚£å‡ ä¸ªéƒ¨åˆ†)éƒ½éœ€è¦ key (è¿™é‡Œçš„ key æŒ‡ rsa çš„ key)ï¼Œkey å­˜åœ¨***å„è‡ª***çš„keyæ–‡ä»¶é‡Œé¢ï¼Œè¿è¡Œéœ€è¦ä¸¤å¯¹ keyï¼Œåˆ†åˆ«æ˜¯ super_admin_privkey.pem ä¸ super_admin_pubkey.pem ã€ admin_privkey.pem ä¸ admin_pubkey.pem ã€‚monitor éƒ¨åˆ†éœ€è¦ admin_privkey.pem ç”¨æ¥æ¨é€ï¼Œclient éƒ¨åˆ†éœ€è¦ super_admin_privkey.pem å’Œ admin_privkey.pem ç”¨æ¥æ§åˆ¶ç­‰ï¼Œserver éœ€è¦ super_admin_pubkey.pem å’Œ admin_pubkey.pem æ¥éªŒè¯ç­‰ã€‚